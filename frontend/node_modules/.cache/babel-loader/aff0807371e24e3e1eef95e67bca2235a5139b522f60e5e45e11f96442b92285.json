{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ashishkumar/Desktop/Labs Co/Resume Projects/Smart Snapper/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ashishkumar/Desktop/Labs Co/Resume Projects/Smart Snapper/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContext}from'react';import React from'react';import{CartContext}from'../CartContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ScreenWith=function ScreenWith(){var _useContext=useContext(CartContext),auth=_useContext.auth,formatDate=_useContext.formatDate,formatTime=_useContext.formatTime,user=_useContext.user,alt=_useContext.alt,baseURL=_useContext.baseURL;var duration=0;var interval,intervalLoc;var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var screenConstraints;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:screenConstraints={video:true,audio:true};navigator.mediaDevices.getDisplayMedia(screenConstraints).then(function(screenStream){/* use the screen & audio stream */var micConstraints={audio:true};navigator.mediaDevices.getUserMedia(micConstraints).then(function(micStream){/* use the microphone stream */ //create a new stream in which to pack everything together\nvar mediaStreamObj=new MediaStream();// assets\nvar screenWithAudio=document.querySelector(\".screenWithAudioCtr\");var recordScreenWith=document.querySelector(\".screenWithAudio-sec-btn\");var screenWithBtn=document.querySelector(\".screen-rec-withAudio\");var durationBtn=document.querySelector(\".screenWithAudio-duration\");//add the screen video stream\nscreenStream.getVideoTracks().forEach(function(videoTrack){mediaStreamObj.addTrack(videoTrack);});//create new Audio Context\nvar context=new AudioContext();//create new MediaStream destination. This is were our final stream will be.\nvar audioDestinationNode=context.createMediaStreamDestination();//check to see if we have a screen stream and only then add it\nif(screenStream&&screenStream.getAudioTracks().length>0){//get the audio from the screen stream\nvar systemSource=context.createMediaStreamSource(screenStream);//set it's volume (from 0.1 to 1.0)\nvar systemGain=context.createGain();systemGain.gain.value=1.0;//add it to the destination\nsystemSource.connect(systemGain).connect(audioDestinationNode);}//check to see if we have a microphone stream and only then add it\nif(micStream&&micStream.getAudioTracks().length>0){//get the audio from the microphone stream\nvar micSource=context.createMediaStreamSource(micStream);//set it's volume\nvar micGain=context.createGain();micGain.gain.value=1.0;//add it to the destination\nmicSource.connect(micGain).connect(audioDestinationNode);}//add the combined audio stream\naudioDestinationNode.stream.getAudioTracks().forEach(function(audioTrack){mediaStreamObj.addTrack(audioTrack);});// getting media tracks\nvar screenTrackWithAudio=screenStream.getTracks();var audioTracks=micStream.getTracks();{// buttons\nvar screenWithAudioPause=document.getElementById('screenWithAudiobtnPauseReco');var screenWithAudioResume=document.getElementById('screenWithAudiobtnResumeReco');var screenWithAudioStop=document.getElementById('screenWithAudiobtnStopReco');screenWithAudioResume.style.display=\"none\";screenWithAudioPause.style.display=\"inline-block\";screenWithAudioStop.style.display=\"inline-block\";// Chunk array to store the audio data\nvar _recordedChunks=[];screenWithAudio.srcObject=mediaStreamObj;screenWithBtn.style.display=\"none\";recordScreenWith.style.display=\"flex\";// setting time\nrunInterval();durationBtn.innerHTML='00:00';duration=0;var latitude=[],longitude=[];intervalLoc=setInterval(function(){navigator.geolocation.getCurrentPosition(function(pos){var size=latitude.length;var lt=pos.coords.latitude;var ln=pos.coords.longitude;console.log(lt,ln);if(size!==0){if(Math.abs(lt-latitude[size-1])>0.0001||Math.abs(ln-longitude[size-1])>0.0001){latitude.push(lt);longitude.push(ln);}}else{latitude.push(lt);longitude.push(ln);}});},2000);// setup media recorder \nvar mediaRecorder=new MediaRecorder(mediaStreamObj);// Start event\nmediaRecorder.start();screenWithAudioPause.addEventListener('click',function(){mediaRecorder.pause();});screenWithAudioResume.addEventListener('click',function(){mediaRecorder.resume();});screenWithAudioStop.addEventListener('click',function(){mediaRecorder.stop();});// If audio data available then push\n// it to the chunk array\nmediaRecorder.ondataavailable=function(e){if(e.data.size>0)_recordedChunks.push(e.data);};mediaRecorder.onpause=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:screenWithAudioPause.style.display=\"none\";screenWithAudioResume.style.display=\"inline-block\";clearInterval(interval);case 3:case\"end\":return _context.stop();}},_callee);}));mediaRecorder.onresume=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:screenWithAudioResume.style.display=\"none\";screenWithAudioPause.style.display=\"inline-block\";screenWithAudioStop.style.display=\"inline-block\";runInterval();case 4:case\"end\":return _context2.stop();}},_callee2);}));// Convert the audio data in to blob\n// after stopping the recording\nmediaRecorder.onstop=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(ev){var blob,url,fileName,date,time,i,_i,formData;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:screenTrackWithAudio.forEach(function(track){track.stop();});audioTracks.forEach(function(track){track.stop();});clearInterval(interval);screenWithBtn.style.display=\"inline-block\";recordScreenWith.style.display=\"none\";blob=new Blob(_recordedChunks,{type:'video/mp4'});url=window.URL.createObjectURL(blob);// take file input\nfileName=prompt(\"Enter file name\",\"my-screen\");// save file\ndate=formatDate();time=formatTime();clearInterval(intervalLoc);for(i=0;i<latitude.length;i++){latitude[i]=latitude[i].toString();}for(_i=0;_i<longitude.length;_i++){// console.log(latitude[i]);\nlongitude[_i]=longitude[_i].toString();}formData=new FormData();formData.append(\"screenwith\",blob);formData.append(\"filename\",fileName);formData.append(\"date\",date);formData.append(\"time\",time);if(latitude.length===1){formData.append('latitude','');}latitude.forEach(function(latitude,index){formData.append('latitude',latitude);});if(latitude.length===1){formData.append(\"longitude\",'');}longitude.forEach(function(longitude,index){formData.append(\"longitude\",longitude);});formData.append(\"duration\",duration);formData.append(\"alias\",auth.user.alias);formData.append(\"ip\",user.ip);formData.append(\"iptype\",user.iptype);formData.append(\"devicebrand\",user.device.brand);formData.append(\"devicename\",user.device.name);formData.append(\"devicetype\",user.device.type);formData.append(\"searchname\",user.name);formData.append(\"searchtype\",user.type);formData.append(\"searchversion\",user.version);formData.append(\"osname\",user.os.name);formData.append(\"ostype\",user.os.type);fetch(\"\".concat(baseURL,\"/screenwith\"),{method:'POST',body:formData}).then(function(response){return response.json();}).then(function(data){return console.log(data);});screenWithAudio.srcObject=null;case 36:case\"end\":return _context3.stop();}},_callee3);}));return function(_x){return _ref4.apply(this,arguments);};}();}function runInterval(){interval=setInterval(function(){duration++;if(duration<10)durationBtn.innerHTML=\"00:0\".concat(duration);else if(duration<60)durationBtn.innerHTML=\"00:\".concat(duration);else durationBtn.innerHTML=\"0\".concat(duration/60,\":\").concat(duration%60);},1000);}}).catch(function(err){console.log(err);});}).catch(function(err){console.log(err);});case 2:case\"end\":return _context4.stop();}},_callee4);}));return function handleClick(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"screenWithAudio-sec\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Screen With Audio\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"video\",{autoPlay:true,muted:true,className:\"screenWithAudioCtr\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"screen-rec-withAudio\",onClick:handleClick,children:\"Start\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"screenWithAudio-sec-btn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"screenWithAudio-duration duration\",children:\"00:00\"}),/*#__PURE__*/_jsx(\"button\",{id:\"screenWithAudiobtnPauseReco\",children:\"Pause\"}),/*#__PURE__*/_jsx(\"button\",{id:\"screenWithAudiobtnResumeReco\",style:{display:\"none\"},children:\"Resume\"}),/*#__PURE__*/_jsx(\"button\",{id:\"screenWithAudiobtnStopReco\",children:\"Stop\"})]})]});};export default ScreenWith;","map":{"version":3,"names":["useContext","React","CartContext","jsx","_jsx","jsxs","_jsxs","ScreenWith","_useContext","auth","formatDate","formatTime","user","alt","baseURL","duration","interval","intervalLoc","handleClick","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee4","screenConstraints","wrap","_callee4$","_context4","prev","next","video","audio","navigator","mediaDevices","getDisplayMedia","then","screenStream","micConstraints","getUserMedia","micStream","mediaStreamObj","MediaStream","screenWithAudio","document","querySelector","recordScreenWith","screenWithBtn","durationBtn","getVideoTracks","forEach","videoTrack","addTrack","context","AudioContext","audioDestinationNode","createMediaStreamDestination","getAudioTracks","length","systemSource","createMediaStreamSource","systemGain","createGain","gain","value","connect","micSource","micGain","stream","audioTrack","screenTrackWithAudio","getTracks","audioTracks","screenWithAudioPause","getElementById","screenWithAudioResume","screenWithAudioStop","style","display","_recordedChunks","srcObject","runInterval","innerHTML","latitude","longitude","setInterval","geolocation","getCurrentPosition","pos","size","lt","coords","ln","console","log","Math","abs","push","mediaRecorder","MediaRecorder","start","addEventListener","pause","resume","stop","ondataavailable","e","data","onpause","_callee","_callee$","_context","clearInterval","onresume","_callee2","_callee2$","_context2","onstop","_ref4","_callee3","ev","blob","url","fileName","date","time","i","_i","formData","_callee3$","_context3","track","Blob","type","window","URL","createObjectURL","prompt","toString","FormData","append","index","alias","ip","iptype","device","brand","name","version","os","fetch","concat","method","body","response","json","_x","apply","arguments","catch","err","className","children","autoPlay","muted","onClick","id"],"sources":["/Users/ashishkumar/Desktop/Labs Co/Resume Projects/Smart Snapper/frontend/src/components/ScreenWith.js"],"sourcesContent":["import { useContext } from 'react';\r\nimport React from 'react'\r\nimport { CartContext } from '../CartContext';\r\n\r\n\r\nconst ScreenWith = () => {\r\n\r\n    const { auth, formatDate, formatTime, user, alt, baseURL } = useContext(CartContext);\r\n\r\n    let duration = 0;\r\n    let interval, intervalLoc;\r\n\r\n    const handleClick = async () => {\r\n        var screenConstraints = { video: true, audio: true };\r\n        navigator.mediaDevices.getDisplayMedia(screenConstraints).then(function (screenStream) {\r\n            /* use the screen & audio stream */\r\n\r\n            var micConstraints = { audio: true };\r\n            navigator.mediaDevices.getUserMedia(micConstraints).then(function (micStream) {\r\n                /* use the microphone stream */\r\n\r\n                //create a new stream in which to pack everything together\r\n                var mediaStreamObj = new MediaStream();\r\n\r\n\r\n                // assets\r\n                let screenWithAudio = document.querySelector(\".screenWithAudioCtr\");\r\n                let recordScreenWith = document.querySelector(\".screenWithAudio-sec-btn\");\r\n                let screenWithBtn = document.querySelector(\".screen-rec-withAudio\");\r\n                let durationBtn = document.querySelector(\".screenWithAudio-duration\");\r\n\r\n                //add the screen video stream\r\n                screenStream.getVideoTracks().forEach(function (videoTrack) {\r\n                    mediaStreamObj.addTrack(videoTrack);\r\n                });\r\n\r\n                //create new Audio Context\r\n                var context = new AudioContext();\r\n\r\n                //create new MediaStream destination. This is were our final stream will be.\r\n                var audioDestinationNode = context.createMediaStreamDestination();\r\n\r\n                //check to see if we have a screen stream and only then add it\r\n                if (screenStream && screenStream.getAudioTracks().length > 0) {\r\n                    //get the audio from the screen stream\r\n                    const systemSource = context.createMediaStreamSource(screenStream);\r\n\r\n                    //set it's volume (from 0.1 to 1.0)\r\n                    const systemGain = context.createGain();\r\n                    systemGain.gain.value = 1.0;\r\n\r\n                    //add it to the destination\r\n                    systemSource.connect(systemGain).connect(audioDestinationNode);\r\n\r\n                }\r\n\r\n                //check to see if we have a microphone stream and only then add it\r\n                if (micStream && micStream.getAudioTracks().length > 0) {\r\n                    //get the audio from the microphone stream\r\n                    const micSource = context.createMediaStreamSource(micStream);\r\n\r\n                    //set it's volume\r\n                    const micGain = context.createGain();\r\n                    micGain.gain.value = 1.0;\r\n\r\n                    //add it to the destination\r\n                    micSource.connect(micGain).connect(audioDestinationNode);\r\n                }\r\n\r\n                //add the combined audio stream\r\n                audioDestinationNode.stream.getAudioTracks().forEach(function (audioTrack) {\r\n                    mediaStreamObj.addTrack(audioTrack);\r\n                });\r\n\r\n                // getting media tracks\r\n                let screenTrackWithAudio = screenStream.getTracks();\r\n                let audioTracks = micStream.getTracks();\r\n\r\n                {\r\n                    // buttons\r\n                    let screenWithAudioPause = document.getElementById('screenWithAudiobtnPauseReco');\r\n                    let screenWithAudioResume = document.getElementById('screenWithAudiobtnResumeReco');\r\n                    let screenWithAudioStop = document.getElementById('screenWithAudiobtnStopReco');\r\n\r\n                    screenWithAudioResume.style.display = \"none\";\r\n                    screenWithAudioPause.style.display = \"inline-block\";\r\n                    screenWithAudioStop.style.display = \"inline-block\";\r\n\r\n                    // Chunk array to store the audio data\r\n                    let _recordedChunks = [];\r\n                    screenWithAudio.srcObject = mediaStreamObj;\r\n                    screenWithBtn.style.display = \"none\";\r\n                    recordScreenWith.style.display = \"flex\";\r\n\r\n\r\n                    // setting time\r\n                    runInterval();\r\n                    durationBtn.innerHTML = '00:00';\r\n                    duration = 0;\r\n\r\n                    let latitude = [], longitude = [];\r\n\r\n                    intervalLoc = setInterval(() => {\r\n                        navigator.geolocation.getCurrentPosition(function (pos) {\r\n                            let size = latitude.length;\r\n                            let lt = pos.coords.latitude;\r\n                            let ln = pos.coords.longitude;\r\n                            console.log(lt, ln);\r\n                            if (size !== 0) {\r\n                                if (Math.abs(lt - latitude[size - 1]) > 0.0001 || Math.abs(ln - longitude[size - 1]) > 0.0001) {\r\n                                    latitude.push(lt);\r\n                                    longitude.push(ln);\r\n                                }\r\n                            } else {\r\n                                latitude.push(lt);\r\n                                longitude.push(ln);\r\n                            }\r\n                        })\r\n                    }, 2000);\r\n\r\n                    // setup media recorder \r\n                    let mediaRecorder = new MediaRecorder(mediaStreamObj);\r\n\r\n                    // Start event\r\n                    mediaRecorder.start();\r\n                    screenWithAudioPause.addEventListener('click', () => { mediaRecorder.pause(); });\r\n                    screenWithAudioResume.addEventListener('click', () => { mediaRecorder.resume(); });\r\n                    screenWithAudioStop.addEventListener('click', () => { mediaRecorder.stop(); });\r\n\r\n                    // If audio data available then push\r\n                    // it to the chunk array\r\n                    mediaRecorder.ondataavailable = function (e) {\r\n                        if (e.data.size > 0)\r\n                            _recordedChunks.push(e.data);\r\n                    }\r\n                    mediaRecorder.onpause = async () => {\r\n                        screenWithAudioPause.style.display = \"none\";\r\n                        screenWithAudioResume.style.display = \"inline-block\";\r\n                        clearInterval(interval);\r\n                    };\r\n                    mediaRecorder.onresume = async () => {\r\n                        screenWithAudioResume.style.display = \"none\";\r\n                        screenWithAudioPause.style.display = \"inline-block\";\r\n                        screenWithAudioStop.style.display = \"inline-block\";\r\n                        runInterval();\r\n                    };\r\n\r\n                    // Convert the audio data in to blob\r\n                    // after stopping the recording\r\n                    mediaRecorder.onstop = async function (ev) {\r\n                        screenTrackWithAudio.forEach((track) => {\r\n                            track.stop();\r\n                        });\r\n                        audioTracks.forEach((track) => {\r\n                            track.stop();\r\n                        });\r\n                        clearInterval(interval);\r\n                        screenWithBtn.style.display = \"inline-block\";\r\n                        recordScreenWith.style.display = \"none\";\r\n                        var blob = new Blob(_recordedChunks, { type: 'video/mp4' });\r\n                        let url = window.URL.createObjectURL(blob);\r\n                        // take file input\r\n                        let fileName = prompt(\"Enter file name\", \"my-screen\");\r\n\r\n                        // save file\r\n                        let date = formatDate();\r\n                        let time = formatTime();\r\n\r\n                        clearInterval(intervalLoc);\r\n\r\n                        for (let i = 0; i < latitude.length; i++) {\r\n                            latitude[i] = latitude[i].toString();\r\n                        }\r\n                        for (let i = 0; i < longitude.length; i++) {\r\n                            // console.log(latitude[i]);\r\n                            longitude[i] = longitude[i].toString();\r\n                        }\r\n\r\n                        const formData = new FormData();\r\n                        formData.append(\"screenwith\", blob);\r\n                        formData.append(\"filename\", fileName);\r\n                        formData.append(\"date\", date);\r\n                        formData.append(\"time\", time);\r\n\r\n\r\n                        if (latitude.length === 1) {\r\n                            formData.append('latitude', '');\r\n                        }\r\n                        latitude.forEach((latitude, index) => {\r\n                            formData.append('latitude', latitude);\r\n                        });\r\n\r\n\r\n                        if (latitude.length === 1) {\r\n                            formData.append(\"longitude\", '');\r\n                        }\r\n                        longitude.forEach((longitude, index) => {\r\n                            formData.append(\"longitude\", longitude);\r\n                        });\r\n\r\n\r\n                        formData.append(\"duration\", duration);\r\n                        formData.append(\"alias\", auth.user.alias);\r\n\r\n                        formData.append(\"ip\", user.ip);\r\n                        formData.append(\"iptype\", user.iptype);\r\n                        formData.append(\"devicebrand\", user.device.brand);\r\n                        formData.append(\"devicename\", user.device.name);\r\n                        formData.append(\"devicetype\", user.device.type);\r\n                        formData.append(\"searchname\", user.name);\r\n                        formData.append(\"searchtype\", user.type);\r\n                        formData.append(\"searchversion\", user.version);\r\n                        formData.append(\"osname\", user.os.name);\r\n                        formData.append(\"ostype\", user.os.type);\r\n\r\n                        fetch(`${baseURL}/screenwith`, {\r\n                            method: 'POST',\r\n                            body: formData\r\n                        }).then((response) => response.json())\r\n                            .then((data) => console.log(data));\r\n\r\n                        screenWithAudio.srcObject = null;\r\n                    }\r\n                }\r\n\r\n                function runInterval() {\r\n                    interval = setInterval(() => {\r\n                        duration++;\r\n                        if (duration < 10)\r\n                            durationBtn.innerHTML = `00:0${duration}`;\r\n                        else if (duration < 60)\r\n                            durationBtn.innerHTML = `00:${duration}`;\r\n                        else\r\n                            durationBtn.innerHTML = `0${duration / 60}:${duration % 60}`;\r\n\r\n                    }, 1000);\r\n                }\r\n\r\n            })\r\n                .catch(function (err) {\r\n                    console.log(err);\r\n                });\r\n\r\n        }).catch(function (err) {\r\n            console.log(err);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"screenWithAudio-sec\">\r\n            <h3>Screen With Audio</h3>\r\n            <div>\r\n                <video autoPlay muted className=\"screenWithAudioCtr\"></video>\r\n            </div>\r\n            <button className=\"screen-rec-withAudio\" onClick={handleClick}>Start</button>\r\n            <div className=\"screenWithAudio-sec-btn\">\r\n                <span className=\"screenWithAudio-duration duration\">00:00</span>\r\n                <button id=\"screenWithAudiobtnPauseReco\">Pause</button>\r\n                <button id=\"screenWithAudiobtnResumeReco\" style={{ display: \"none\" }}>Resume</button>\r\n                <button id=\"screenWithAudiobtnStopReco\">Stop</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ScreenWith"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}