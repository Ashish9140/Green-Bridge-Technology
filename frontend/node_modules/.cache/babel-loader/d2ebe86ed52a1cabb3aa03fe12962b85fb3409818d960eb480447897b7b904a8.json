{"ast":null,"code":"var _jsxFileName = \"/Users/ashishkumar/Desktop/Labs Co/Resume Projects/Smart Snapper/frontend/src/components/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useContext, useState, useRef } from \"react\";\nimport { CartContext } from \"../CartContext\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OSMMap = () => {\n  _s();\n  const {\n    targetpoint\n  } = useContext(CartContext);\n  const [map, setMap] = useState(null);\n  const userMarkerRef = useRef(null);\n  const targetMarkerRef = useRef(null);\n  const lineRef = useRef(null);\n  useEffect(() => {\n    const latitude = parseFloat(targetpoint.latitude);\n    const longitude = parseFloat(targetpoint.longitude);\n    if (!map) {\n      const osmMap = L.map('map').setView([latitude, longitude], 18);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        maxZoom: 40\n      }).addTo(osmMap);\n      setMap(osmMap);\n      const customIcon = L.icon({\n        iconUrl: \"/images/marker.png\",\n        iconSize: [50, 50],\n        iconAnchor: [16, 32]\n      });\n      const targetMarker = L.marker([latitude, longitude], {\n        icon: customIcon\n      });\n      targetMarkerRef.current = targetMarker;\n      targetMarker.addTo(osmMap);\n    } else {\n      map.setView([latitude, longitude], 18);\n      if (targetMarkerRef.current) {\n        targetMarkerRef.current.setLatLng([latitude, longitude]);\n      } else {\n        const customIcon = L.icon({\n          iconUrl: \"/images/marker.png\",\n          iconSize: [50, 50],\n          iconAnchor: [16, 32]\n        });\n        const targetMarker = L.marker([latitude, longitude], {\n          icon: customIcon\n        });\n        targetMarkerRef.current = targetMarker;\n        targetMarker.addTo(map);\n      }\n    }\n  }, [targetpoint, map]);\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const userLat = position.coords.latitude;\n        const userLng = position.coords.longitude;\n        if (map) {\n          if (userMarkerRef.current) {\n            userMarkerRef.current.setLatLng([userLat, userLng]);\n          } else {\n            const userCustomIcon = L.icon({\n              iconUrl: \"/images/marker.png\",\n              // Replace with the user marker image URL\n              iconSize: [50, 50],\n              iconAnchor: [16, 32]\n            });\n            const userMarker = L.marker([userLat, userLng], {\n              icon: userCustomIcon\n            });\n            userMarkerRef.current = userMarker;\n            userMarker.addTo(map);\n          }\n        }\n        if (lineRef.current) {\n          map.removeLayer(lineRef.current);\n        }\n        const line = L.polyline([[userLat, userLng], [targetpoint.latitude, targetpoint.longitude]], {\n          color: 'blue'\n        }).addTo(map);\n        lineRef.current = line;\n      });\n    }\n  }, [map, targetpoint]);\n  useEffect(() => {\n    return () => {\n      if (map) {\n        map.remove();\n      }\n    };\n  }, [map]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\",\n      style: {\n        height: \"600px\",\n        width: \"400px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n};\n_s(OSMMap, \"p2MnUzgqFrhTfw/zZVGPGElBAy4=\");\n_c = OSMMap;\nexport default OSMMap;\nvar _c;\n$RefreshReg$(_c, \"OSMMap\");","map":{"version":3,"names":["React","useEffect","useContext","useState","useRef","CartContext","L","jsxDEV","_jsxDEV","OSMMap","_s","targetpoint","map","setMap","userMarkerRef","targetMarkerRef","lineRef","latitude","parseFloat","longitude","osmMap","setView","tileLayer","maxZoom","addTo","customIcon","icon","iconUrl","iconSize","iconAnchor","targetMarker","marker","current","setLatLng","navigator","geolocation","getCurrentPosition","position","userLat","coords","userLng","userCustomIcon","userMarker","removeLayer","line","polyline","color","remove","children","id","style","height","width","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ashishkumar/Desktop/Labs Co/Resume Projects/Smart Snapper/frontend/src/components/Map.js"],"sourcesContent":["import React, { useEffect, useContext, useState, useRef } from \"react\";\r\nimport { CartContext } from \"../CartContext\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nconst OSMMap = () => {\r\n    const { targetpoint } = useContext(CartContext);\r\n    const [map, setMap] = useState(null);\r\n    const userMarkerRef = useRef(null);\r\n    const targetMarkerRef = useRef(null);\r\n    const lineRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const latitude = parseFloat(targetpoint.latitude);\r\n        const longitude = parseFloat(targetpoint.longitude);\r\n\r\n        if (!map) {\r\n            const osmMap = L.map('map').setView([latitude, longitude], 18);\r\n\r\n            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n                maxZoom: 40,\r\n            }).addTo(osmMap);\r\n\r\n            setMap(osmMap);\r\n\r\n            const customIcon = L.icon({\r\n                iconUrl: \"/images/marker.png\",\r\n                iconSize: [50, 50],\r\n                iconAnchor: [16, 32],\r\n            });\r\n\r\n            const targetMarker = L.marker([latitude, longitude], { icon: customIcon });\r\n            targetMarkerRef.current = targetMarker;\r\n\r\n            targetMarker.addTo(osmMap);\r\n        } else {\r\n            map.setView([latitude, longitude], 18);\r\n\r\n            if (targetMarkerRef.current) {\r\n                targetMarkerRef.current.setLatLng([latitude, longitude]);\r\n            } else {\r\n                const customIcon = L.icon({\r\n                    iconUrl: \"/images/marker.png\",\r\n                    iconSize: [50, 50],\r\n                    iconAnchor: [16, 32],\r\n                });\r\n\r\n                const targetMarker = L.marker([latitude, longitude], { icon: customIcon });\r\n                targetMarkerRef.current = targetMarker;\r\n                targetMarker.addTo(map);\r\n            }\r\n        }\r\n    }, [targetpoint, map]);\r\n\r\n    useEffect(() => {\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition((position) => {\r\n                const userLat = position.coords.latitude;\r\n                const userLng = position.coords.longitude;\r\n\r\n                if (map) {\r\n                    if (userMarkerRef.current) {\r\n                        userMarkerRef.current.setLatLng([userLat, userLng]);\r\n                    } else {\r\n                        const userCustomIcon = L.icon({\r\n                            iconUrl: \"/images/marker.png\", // Replace with the user marker image URL\r\n                            iconSize: [50, 50],\r\n                            iconAnchor: [16, 32],\r\n                        });\r\n\r\n                        const userMarker = L.marker([userLat, userLng], { icon: userCustomIcon });\r\n                        userMarkerRef.current = userMarker;\r\n                        userMarker.addTo(map);\r\n                    }\r\n                }\r\n\r\n                if (lineRef.current) {\r\n                    map.removeLayer(lineRef.current);\r\n                }\r\n\r\n                const line = L.polyline(\r\n                    [\r\n                        [userLat, userLng],\r\n                        [targetpoint.latitude, targetpoint.longitude]\r\n                    ],\r\n                    {\r\n                        color: 'blue',\r\n                    }\r\n                ).addTo(map);\r\n\r\n                lineRef.current = line;\r\n            });\r\n        }\r\n    }, [map, targetpoint]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (map) {\r\n                map.remove();\r\n            }\r\n        };\r\n    }, [map]);\r\n\r\n    return (\r\n        <div>\r\n            <div id=\"map\" style={{ height: \"600px\", width: \"400px\" }}></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OSMMap;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AACtE,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjB,MAAM;IAAEC;EAAY,CAAC,GAAGT,UAAU,CAACG,WAAW,CAAC;EAC/C,MAAM,CAACO,GAAG,EAAEC,MAAM,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAMW,aAAa,GAAGV,MAAM,CAAC,IAAI,CAAC;EAClC,MAAMW,eAAe,GAAGX,MAAM,CAAC,IAAI,CAAC;EACpC,MAAMY,OAAO,GAAGZ,MAAM,CAAC,IAAI,CAAC;EAE5BH,SAAS,CAAC,MAAM;IACZ,MAAMgB,QAAQ,GAAGC,UAAU,CAACP,WAAW,CAACM,QAAQ,CAAC;IACjD,MAAME,SAAS,GAAGD,UAAU,CAACP,WAAW,CAACQ,SAAS,CAAC;IAEnD,IAAI,CAACP,GAAG,EAAE;MACN,MAAMQ,MAAM,GAAGd,CAAC,CAACM,GAAG,CAAC,KAAK,CAAC,CAACS,OAAO,CAAC,CAACJ,QAAQ,EAAEE,SAAS,CAAC,EAAE,EAAE,CAAC;MAE9Db,CAAC,CAACgB,SAAS,CAAC,oDAAoD,EAAE;QAC9DC,OAAO,EAAE;MACb,CAAC,CAAC,CAACC,KAAK,CAACJ,MAAM,CAAC;MAEhBP,MAAM,CAACO,MAAM,CAAC;MAEd,MAAMK,UAAU,GAAGnB,CAAC,CAACoB,IAAI,CAAC;QACtBC,OAAO,EAAE,oBAAoB;QAC7BC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;QAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;MACvB,CAAC,CAAC;MAEF,MAAMC,YAAY,GAAGxB,CAAC,CAACyB,MAAM,CAAC,CAACd,QAAQ,EAAEE,SAAS,CAAC,EAAE;QAAEO,IAAI,EAAED;MAAW,CAAC,CAAC;MAC1EV,eAAe,CAACiB,OAAO,GAAGF,YAAY;MAEtCA,YAAY,CAACN,KAAK,CAACJ,MAAM,CAAC;IAC9B,CAAC,MAAM;MACHR,GAAG,CAACS,OAAO,CAAC,CAACJ,QAAQ,EAAEE,SAAS,CAAC,EAAE,EAAE,CAAC;MAEtC,IAAIJ,eAAe,CAACiB,OAAO,EAAE;QACzBjB,eAAe,CAACiB,OAAO,CAACC,SAAS,CAAC,CAAChB,QAAQ,EAAEE,SAAS,CAAC,CAAC;MAC5D,CAAC,MAAM;QACH,MAAMM,UAAU,GAAGnB,CAAC,CAACoB,IAAI,CAAC;UACtBC,OAAO,EAAE,oBAAoB;UAC7BC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;UAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;QACvB,CAAC,CAAC;QAEF,MAAMC,YAAY,GAAGxB,CAAC,CAACyB,MAAM,CAAC,CAACd,QAAQ,EAAEE,SAAS,CAAC,EAAE;UAAEO,IAAI,EAAED;QAAW,CAAC,CAAC;QAC1EV,eAAe,CAACiB,OAAO,GAAGF,YAAY;QACtCA,YAAY,CAACN,KAAK,CAACZ,GAAG,CAAC;MAC3B;IACJ;EACJ,CAAC,EAAE,CAACD,WAAW,EAAEC,GAAG,CAAC,CAAC;EAEtBX,SAAS,CAAC,MAAM;IACZ,IAAIiC,SAAS,CAACC,WAAW,EAAE;MACvBD,SAAS,CAACC,WAAW,CAACC,kBAAkB,CAAEC,QAAQ,IAAK;QACnD,MAAMC,OAAO,GAAGD,QAAQ,CAACE,MAAM,CAACtB,QAAQ;QACxC,MAAMuB,OAAO,GAAGH,QAAQ,CAACE,MAAM,CAACpB,SAAS;QAEzC,IAAIP,GAAG,EAAE;UACL,IAAIE,aAAa,CAACkB,OAAO,EAAE;YACvBlB,aAAa,CAACkB,OAAO,CAACC,SAAS,CAAC,CAACK,OAAO,EAAEE,OAAO,CAAC,CAAC;UACvD,CAAC,MAAM;YACH,MAAMC,cAAc,GAAGnC,CAAC,CAACoB,IAAI,CAAC;cAC1BC,OAAO,EAAE,oBAAoB;cAAE;cAC/BC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;cAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;YACvB,CAAC,CAAC;YAEF,MAAMa,UAAU,GAAGpC,CAAC,CAACyB,MAAM,CAAC,CAACO,OAAO,EAAEE,OAAO,CAAC,EAAE;cAAEd,IAAI,EAAEe;YAAe,CAAC,CAAC;YACzE3B,aAAa,CAACkB,OAAO,GAAGU,UAAU;YAClCA,UAAU,CAAClB,KAAK,CAACZ,GAAG,CAAC;UACzB;QACJ;QAEA,IAAII,OAAO,CAACgB,OAAO,EAAE;UACjBpB,GAAG,CAAC+B,WAAW,CAAC3B,OAAO,CAACgB,OAAO,CAAC;QACpC;QAEA,MAAMY,IAAI,GAAGtC,CAAC,CAACuC,QAAQ,CACnB,CACI,CAACP,OAAO,EAAEE,OAAO,CAAC,EAClB,CAAC7B,WAAW,CAACM,QAAQ,EAAEN,WAAW,CAACQ,SAAS,CAAC,CAChD,EACD;UACI2B,KAAK,EAAE;QACX,CACJ,CAAC,CAACtB,KAAK,CAACZ,GAAG,CAAC;QAEZI,OAAO,CAACgB,OAAO,GAAGY,IAAI;MAC1B,CAAC,CAAC;IACN;EACJ,CAAC,EAAE,CAAChC,GAAG,EAAED,WAAW,CAAC,CAAC;EAEtBV,SAAS,CAAC,MAAM;IACZ,OAAO,MAAM;MACT,IAAIW,GAAG,EAAE;QACLA,GAAG,CAACmC,MAAM,CAAC,CAAC;MAChB;IACJ,CAAC;EACL,CAAC,EAAE,CAACnC,GAAG,CAAC,CAAC;EAET,oBACIJ,OAAA;IAAAwC,QAAA,eACIxC,OAAA;MAAKyC,EAAE,EAAC,KAAK;MAACC,KAAK,EAAE;QAAEC,MAAM,EAAE,OAAO;QAAEC,KAAK,EAAE;MAAQ;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC/D,CAAC;AAEd,CAAC;AAAC9C,EAAA,CAvGID,MAAM;AAAAgD,EAAA,GAANhD,MAAM;AAyGZ,eAAeA,MAAM;AAAC,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}