{"ast":null,"code":"var _jsxFileName = \"/Users/ashishkumar/Desktop/Labs Co/Resume Projects/Smart Snapper/frontend/src/components/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useContext, useState } from \"react\";\nimport { CartContext } from \"../CartContext\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OSMMap = () => {\n  _s();\n  const {\n    targetpoint\n  } = useContext(CartContext);\n  const [map, setMap] = useState(null);\n  useEffect(() => {\n    const latitude = parseFloat(targetpoint.latitude);\n    const longitude = parseFloat(targetpoint.longitude);\n    if (!map) {\n      const osmMap = L.map(\"map\").setView([latitude, longitude], 18);\n      L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n        maxZoom: 40\n      }).addTo(osmMap);\n      setMap(osmMap);\n    } else {\n      map.setView([latitude, longitude], 18);\n    }\n  }, [targetpoint, map]);\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const userLat = position.coords.latitude;\n        const userLng = position.coords.longitude;\n        if (map) {\n          if (map.userMarker) {\n            map.userMarker.setLatLng([userLat, userLng]);\n          } else {\n            const userMarker = L.marker([userLat, userLng]).addTo(map);\n            userMarker.bindPopup(`Current Point: ${userLat}, ${userLng}`);\n            map.userMarker = userMarker;\n          }\n          const targetLat = parseFloat(targetpoint.latitude);\n          const targetLng = parseFloat(targetpoint.longitude);\n          if (map.targetMarker) {\n            map.targetMarker.setLatLng([targetLat, targetLng]);\n          } else {\n            const targetMarker = L.marker([targetLat, targetLng]).addTo(map);\n            targetMarker.bindPopup(`Target Point: ${targetLat}, ${targetLng}`);\n            map.targetMarker = targetMarker;\n          }\n          if (map.line) {\n            map.removeLayer(map.line);\n          }\n          const line = L.polyline([[userLat, userLng], [targetLat, targetLng]], {\n            color: \"blue\"\n          });\n          line.addTo(map);\n          map.line = line;\n        }\n      });\n    }\n  }, [map, targetpoint]);\n  useEffect(() => {\n    return () => {\n      if (map) {\n        map.remove();\n      }\n    };\n  }, [map]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    style: {\n      height: \"600px\",\n      width: \"400px\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 12\n  }, this);\n};\n_s(OSMMap, \"DtI/Kh4U28EkHkDjbb/eYjRgiD0=\");\n_c = OSMMap;\nexport default OSMMap;\nvar _c;\n$RefreshReg$(_c, \"OSMMap\");","map":{"version":3,"names":["React","useEffect","useContext","useState","CartContext","L","jsxDEV","_jsxDEV","OSMMap","_s","targetpoint","map","setMap","latitude","parseFloat","longitude","osmMap","setView","tileLayer","maxZoom","addTo","navigator","geolocation","getCurrentPosition","position","userLat","coords","userLng","userMarker","setLatLng","marker","bindPopup","targetLat","targetLng","targetMarker","line","removeLayer","polyline","color","remove","id","style","height","width","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ashishkumar/Desktop/Labs Co/Resume Projects/Smart Snapper/frontend/src/components/Map.js"],"sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\nimport { CartContext } from \"../CartContext\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nconst OSMMap = () => {\r\n    const { targetpoint } = useContext(CartContext);\r\n    const [map, setMap] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const latitude = parseFloat(targetpoint.latitude);\r\n        const longitude = parseFloat(targetpoint.longitude);\r\n\r\n        if (!map) {\r\n            const osmMap = L.map(\"map\").setView([latitude, longitude], 18);\r\n\r\n            L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n                maxZoom: 40,\r\n            }).addTo(osmMap);\r\n\r\n            setMap(osmMap);\r\n        } else {\r\n            map.setView([latitude, longitude], 18);\r\n        }\r\n    }, [targetpoint, map]);\r\n\r\n    useEffect(() => {\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition((position) => {\r\n                const userLat = position.coords.latitude;\r\n                const userLng = position.coords.longitude;\r\n\r\n                if (map) {\r\n                    if (map.userMarker) {\r\n                        map.userMarker.setLatLng([userLat, userLng]);\r\n                    } else {\r\n                        const userMarker = L.marker([userLat, userLng]).addTo(map);\r\n                        userMarker.bindPopup(`Current Point: ${userLat}, ${userLng}`);\r\n                        map.userMarker = userMarker;\r\n                    }\r\n\r\n                    const targetLat = parseFloat(targetpoint.latitude);\r\n                    const targetLng = parseFloat(targetpoint.longitude);\r\n\r\n                    if (map.targetMarker) {\r\n                        map.targetMarker.setLatLng([targetLat, targetLng]);\r\n                    } else {\r\n                        const targetMarker = L.marker([targetLat, targetLng]).addTo(map);\r\n                        targetMarker.bindPopup(`Target Point: ${targetLat}, ${targetLng}`);\r\n                        map.targetMarker = targetMarker;\r\n                    }\r\n\r\n                    if (map.line) {\r\n                        map.removeLayer(map.line);\r\n                    }\r\n\r\n                    const line = L.polyline(\r\n                        [\r\n                            [userLat, userLng],\r\n                            [targetLat, targetLng],\r\n                        ],\r\n                        {\r\n                            color: \"blue\",\r\n                        }\r\n                    );\r\n\r\n                    line.addTo(map);\r\n                    map.line = line;\r\n                }\r\n            });\r\n        }\r\n    }, [map, targetpoint]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (map) {\r\n                map.remove();\r\n            }\r\n        };\r\n    }, [map]);\r\n\r\n    return <div id=\"map\" style={{ height: \"600px\", width: \"400px\" }}></div>;\r\n};\r\n\r\nexport default OSMMap;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}