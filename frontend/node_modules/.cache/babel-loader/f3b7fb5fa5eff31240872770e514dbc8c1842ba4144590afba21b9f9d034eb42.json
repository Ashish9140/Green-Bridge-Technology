{"ast":null,"code":"var _jsxFileName = \"/Users/ashishkumar/Desktop/Labs Co/Resume Projects/Smart Snapper/frontend/src/components/MapLine.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useContext, useState, useRef } from \"react\";\nimport { CartContext } from \"../CartContext\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OSMMap = () => {\n  _s();\n  const {\n    coordinates\n  } = useContext(CartContext);\n  const [map, setMap] = useState(null);\n  const markersRef = useRef([]);\n\n  // Function to update markers based on new coordinates\n  const updateMarkers = () => {\n    if (map) {\n      markersRef.current.forEach(marker => {\n        map.removeLayer(marker);\n      });\n      markersRef.current = coordinates.map((point, index) => {\n        const pointLatitude = parseFloat(point.lat);\n        const pointLongitude = parseFloat(point.lng);\n        if (!isNaN(pointLatitude) && !isNaN(pointLongitude)) {\n          const customIcon = L.divIcon({\n            className: \"custom-marker\",\n            html: `<div class=\"marker-label\">${index + 1}</div>`,\n            iconSize: [30, 30]\n          });\n          const marker = L.marker([pointLatitude, pointLongitude], {\n            icon: customIcon\n          });\n          marker.addTo(map);\n          return marker;\n        } else {\n          console.error(`Invalid coordinates for point: ${JSON.stringify(point)}`);\n          return null;\n        }\n      });\n    }\n  };\n  useEffect(() => {\n    if (!map && Array.isArray(coordinates) && coordinates.length > 0) {\n      const firstPoint = coordinates[0];\n      const latitude = parseFloat(firstPoint.lat);\n      const longitude = parseFloat(firstPoint.lng);\n      if (!isNaN(latitude) && !isNaN(longitude)) {\n        const osmMap = L.map(\"map\").setView([latitude, longitude], 18);\n        L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n          maxZoom: 40\n        }).addTo(osmMap);\n        setMap(osmMap);\n      } else {\n        console.error(`Invalid coordinates for first point: ${JSON.stringify(firstPoint)}`);\n      }\n    }\n  }, [coordinates, map]);\n  useEffect(() => {\n    if (map) {\n      updateMarkers(); // Update markers when coordinates change\n    }\n  }, [coordinates, map]);\n  useEffect(() => {\n    return () => {\n      if (map) {\n        map.remove();\n      }\n    };\n  }, [map]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\",\n      style: {\n        height: \"600px\",\n        width: \"400px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n                .custom-marker {\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    background-color: #007bff;\n                    color: #fff;\n                    border-radius: 50%;\n                    width: 30px;\n                    height: 30px;\n                }\n                .marker-label {\n                    font-size: 14px;\n                    font-weight: bold;\n                }\n                `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n_s(OSMMap, \"lNZQo7oLL5ci65QIOuXhYGB7qEM=\");\n_c = OSMMap;\nexport default OSMMap;\nvar _c;\n$RefreshReg$(_c, \"OSMMap\");","map":{"version":3,"names":["React","useEffect","useContext","useState","useRef","CartContext","L","jsxDEV","_jsxDEV","OSMMap","_s","coordinates","map","setMap","markersRef","updateMarkers","current","forEach","marker","removeLayer","point","index","pointLatitude","parseFloat","lat","pointLongitude","lng","isNaN","customIcon","divIcon","className","html","iconSize","icon","addTo","console","error","JSON","stringify","Array","isArray","length","firstPoint","latitude","longitude","osmMap","setView","tileLayer","maxZoom","remove","children","id","style","height","width","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ashishkumar/Desktop/Labs Co/Resume Projects/Smart Snapper/frontend/src/components/MapLine.js"],"sourcesContent":["import React, { useEffect, useContext, useState, useRef } from \"react\";\r\nimport { CartContext } from \"../CartContext\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nconst OSMMap = () => {\r\n    const { coordinates } = useContext(CartContext);\r\n    const [map, setMap] = useState(null);\r\n    const markersRef = useRef([]);\r\n\r\n    // Function to update markers based on new coordinates\r\n    const updateMarkers = () => {\r\n        if (map) {\r\n            markersRef.current.forEach((marker) => {\r\n                map.removeLayer(marker);\r\n            });\r\n\r\n            markersRef.current = coordinates.map((point, index) => {\r\n                const pointLatitude = parseFloat(point.lat);\r\n                const pointLongitude = parseFloat(point.lng);\r\n\r\n                if (!isNaN(pointLatitude) && !isNaN(pointLongitude)) {\r\n                    const customIcon = L.divIcon({\r\n                        className: \"custom-marker\",\r\n                        html: `<div class=\"marker-label\">${index + 1}</div>`,\r\n                        iconSize: [30, 30],\r\n                    });\r\n\r\n                    const marker = L.marker([pointLatitude, pointLongitude], {\r\n                        icon: customIcon,\r\n                    });\r\n                    marker.addTo(map);\r\n                    return marker;\r\n                } else {\r\n                    console.error(`Invalid coordinates for point: ${JSON.stringify(point)}`);\r\n                    return null;\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!map && Array.isArray(coordinates) && coordinates.length > 0) {\r\n            const firstPoint = coordinates[0];\r\n            const latitude = parseFloat(firstPoint.lat);\r\n            const longitude = parseFloat(firstPoint.lng);\r\n\r\n            if (!isNaN(latitude) && !isNaN(longitude)) {\r\n                const osmMap = L.map(\"map\").setView([latitude, longitude], 18);\r\n\r\n                L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n                    maxZoom: 40,\r\n                }).addTo(osmMap);\r\n\r\n                setMap(osmMap);\r\n            } else {\r\n                console.error(`Invalid coordinates for first point: ${JSON.stringify(firstPoint)}`);\r\n            }\r\n        }\r\n    }, [coordinates, map]);\r\n\r\n    useEffect(() => {\r\n        if (map) {\r\n            updateMarkers(); // Update markers when coordinates change\r\n        }\r\n    }, [coordinates, map]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (map) {\r\n                map.remove();\r\n            }\r\n        };\r\n    }, [map]);\r\n\r\n    return (\r\n        <div>\r\n            <div id=\"map\" style={{ height: \"600px\", width: \"400px\" }}></div>\r\n            <style>\r\n                {`\r\n                .custom-marker {\r\n                    display: flex;\r\n                    justify-content: center;\r\n                    align-items: center;\r\n                    background-color: #007bff;\r\n                    color: #fff;\r\n                    border-radius: 50%;\r\n                    width: 30px;\r\n                    height: 30px;\r\n                }\r\n                .marker-label {\r\n                    font-size: 14px;\r\n                    font-weight: bold;\r\n                }\r\n                `}\r\n            </style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OSMMap;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}